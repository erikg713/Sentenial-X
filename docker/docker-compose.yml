version: "3"
services:
  app:
    build: .
    ports:
      - "3000:3000"
    env_file:
      - .env
  db:
    image: postgres
    restart: always
    environment:
      POSTGRES_DB: sentenial
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: password
    volumes:
      - pgdata:/var/lib/postgresql/data
volumes:
  pgdata:
# docker-compose.yml
version: '3.8'
services:
  api-gateway:
    build: ./apps/api-gateway
    ports: ["8000:8000"]
    depends_on: [cortex, threat-engine]

  cortex:
    build: ./services/cortex
    ports: ["8080:8080"]
    environment:
      - MODEL_TYPE=distill
    volumes:
      - ./sentenialx/models/artifacts:/app/sentenialx/models/artifacts

  threat-engine:
    build: ./services/threat-engine
    depends_on: [cortex]

  # Add others (dashboard, etc.)
