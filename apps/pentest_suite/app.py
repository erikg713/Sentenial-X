from flask import Flask, jsonify, request
from plugin_registry import load_plugins, PLUGINS, get_plugin_parameters, run_plugin

app = Flask(__name__)
load_plugins()

@app.route("/plugins")
def list_plugins():
    return jsonify(list(PLUGINS.keys()))

@app.route("/plugins/<plugin_name>/parameters")
def plugin_parameters(plugin_name):
    return jsonify(get_plugin_parameters(plugin_name))

@app.route("/plugins/<plugin_name>/run", methods=["POST"])
def plugin_run(plugin_name):
    data = request.json
    result = run_plugin(plugin_name, **data)
    return jsonify(result)

if __name__ == "__main__":
    app.run(debug=True)

