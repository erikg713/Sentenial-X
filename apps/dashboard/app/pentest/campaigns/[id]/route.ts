import { NextRequest, NextResponse } from 'next/server';

export async function GET(req: NextRequest, context: { params: { id: string } }) {
  const { id } = context.params;

  const data = {
    id,
    title: 'Web App Recon + SQLi Test',
    createdAt: new Date(Date.now() - 1000 * 60 * 60).toISOString(),
    status: 'completed',
    riskScore: 0.78,
    findings: [
      "Exposed login form with weak validation",
      "MySQL error-based injection at `/api/search?q=' OR 1=1 --`",
      "No WAF present on public endpoints"
    ],
    notes: "Test run completed successfully. Recommend deploying ModSecurity + input sanitization on `/search`."
  };

  return NextResponse.json(data);
}
